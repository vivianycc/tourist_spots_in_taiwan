{"version":3,"sources":["assets/index.js","assets/img/default_spot_img.jpg","components/Spot.js","components/SearchResults.js","components/IconButton.js","helper.js","components/SearchSpot.js","components/ExplorePage.js","components/CityPage.js","components/SpotPage.js","App.js","index.js"],"names":["DefaultImgs","spot","Spot","props","id","name","picture","picUrl","PictureUrl1","picDesc","PictureDescription1","console","log","linkObj","pathname","state","to","className","src","alt","SearchResults","spots","length","map","ID","Name","description","DescriptionDetail","Picture","IconButton","type","clickHandler","onClick","children","getAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","HMAC","getHMAC","Authorization","SearchSpot","useState","keyword","setKeyword","setSpots","API_URL","requestSpots","a","axios","get","headers","data","useEffect","onSubmit","e","preventDefault","htmlFor","value","placeholder","onChange","target","ExplorePage","CityPage","SpotPage","spotInfo","setSpotInfo","useParams","navigate","useNavigate","requestData","desc","Class1","class1","OpenTime","openTime","ParkingPosition","parking","UpdateTime","updateTime","WebsiteUrl","website","Address","address","Phone","phone","Position","position","href","PositionLat","PositionLon","App","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.534d76a6.chunk.js","sourcesContent":["import DefaultSpotImg from \"./img/default_spot_img.jpg\";\nconst DefaultImgs = {\n  spot: DefaultSpotImg,\n};\n\nexport default DefaultImgs;\n","export default __webpack_public_path__ + \"static/media/default_spot_img.9e7fb3bf.jpg\";","import { Link } from \"react-router-dom\";\nimport { Star } from \"react-feather\";\nimport DefaultImgs from \"../assets\";\nfunction Spot(props) {\n  const { id, name, picture } = props;\n  const { PictureUrl1: picUrl, PictureDescription1: picDesc } = picture;\n  console.log(picUrl);\n  const linkObj = {\n    pathname: `/spot/${id}`,\n    state: {\n      id: id,\n    },\n  };\n  return (\n    <Link to={linkObj} id={id}>\n      <div className=\"spot\">\n        <div className=\"spot-img\">\n          <img src={picUrl ? picUrl : DefaultImgs.spot} alt={picDesc} />\n        </div>\n        <div className=\"spot-brief\">\n          <div className=\"spot-rating\">\n            <Star />\n            <span>5.0</span>\n          </div>\n          <h2>{name}</h2>\n        </div>\n      </div>\n    </Link>\n  );\n}\nexport default Spot;\n","import Spot from \"./Spot\";\n\nfunction SearchResults({ spots }) {\n  return (\n    <div className=\"search-results\">\n      {!spots.length ? (\n        <h2>No spots Found</h2>\n      ) : (\n        spots.map((spot) => (\n          <Spot\n            id={spot.ID}\n            key={spot.ID}\n            name={spot.Name}\n            description={spot.DescriptionDetail}\n            picture={spot.Picture}\n          />\n        ))\n      )}\n    </div>\n  );\n}\nexport default SearchResults;\n","function IconButton(props) {\n  const { className, type, clickHandler } = props;\n  return (\n    <button\n      className={className + \" icon-button\"}\n      type={type}\n      onClick={clickHandler}\n    >\n      {props.children}\n    </button>\n  );\n}\nexport default IconButton;\n","import jsSHA from \"jssha\";\nexport function getAuthorizationHeader() {\n  let AppID = \"fbe78613b5394fdda728acaf51ee3d61\";\n  let AppKey = \"r4Q6k0QzxX0rj9r6wb2WsuDSsaQ\";\n\n  let GMTString = new Date().toGMTString();\n  let ShaObj = new jsSHA(\"SHA-1\", \"TEXT\");\n  ShaObj.setHMACKey(AppKey, \"TEXT\");\n  ShaObj.update(\"x-date: \" + GMTString);\n  let HMAC = ShaObj.getHMAC(\"B64\");\n  let Authorization = `hmac username=\"${AppID}\", algorithm=\"hmac-sha1\", headers=\"x-date\", signature=\"${HMAC}\"`;\n\n  return { Authorization: Authorization, \"X-Date\": GMTString };\n}\n\nexport function isEmpty(obj) {\n  return Object.keys(obj).length === 0;\n}\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport SearchResults from \"./SearchResults\";\nimport IconButton from \"./IconButton\";\nimport { Search } from \"react-feather\";\nimport { getAuthorizationHeader } from \"../helper\";\n\nfunction SearchSpot() {\n  const [keyword, setKeyword] = useState(\"公園\");\n  const [spots, setSpots] = useState([]);\n  const API_URL = `https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$select=ID%2CName%2CPicture&$filter=contains(Name%2C%20'${keyword}')&$top=50&$format=JSON\n  `;\n  useEffect(() => {\n    requestSpots();\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  async function requestSpots() {\n    const { data } = await axios.get(API_URL, {\n      headers: getAuthorizationHeader(),\n    });\n\n    setSpots(data);\n  }\n  return (\n    <div className=\"search-area\">\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n          requestSpots();\n        }}\n      >\n        <label htmlFor=\"search\">你想要去哪裡？</label>\n        <input\n          id=\"search\"\n          type=\"search\"\n          value={keyword}\n          placeholder=\"請輸入關鍵字\"\n          onChange={(e) => setKeyword(e.target.value)}\n        />\n        {/* <label htmlFor=\"city\">地點</label>\n        <select\n          name=\"cities\"\n          id=\"city\"\n          onChange={(e) => setCity(e.target.value)}\n          onBlur={(e) => setCity(e.target.value)}\n        >\n          <option />\n          {Object.keys(CITIES).map((city) => (\n            <option key={city} value={city}>\n              {CITIES[city]}\n            </option>\n          ))}\n        </select> */}\n        <IconButton className=\"search dark\" type=\"submit\">\n          <Search />\n        </IconButton>\n      </form>\n      <SearchResults spots={spots} />\n    </div>\n  );\n}\n\nexport default SearchSpot;\n","import SearchSpot from \"./SearchSpot\";\nimport City from \"./City\";\nimport IconButton from \"./IconButton\";\nimport { Filter } from \"react-feather\";\nfunction ExplorePage() {\n  return (\n    <div className=\"explore-page\">\n      {/* <IconButton className=\"filter-button solid\">\n        <Filter className=\"search-button dark\" />\n      </IconButton> */}\n      <SearchSpot />\n      {/* <div className=\"cities\">\n        <City />\n        <City />\n        <City />\n        <City />\n        <City />\n        <City />\n      </div>  */}\n    </div>\n  );\n}\n\nexport default ExplorePage;\n","import Spot from \"./Spot\";\nfunction CityPage() {\n  return (\n    <div className=\"city-page\">\n      <header>\n        <h1>台北市</h1>\n      </header>\n      <section className=\"tourist-spot-list\">\n        <h2>景點</h2>\n        <Spot className=\"tourist-spot-item\" />\n        <Spot className=\"tourist-spot-item\" />\n        <Spot className=\"tourist-spot-item\" />\n      </section>\n      <section className=\"tourist-activity-list\">\n        <Spot className=\"tourist-activity-item\" />\n      </section>\n    </div>\n  );\n}\n\nexport default CityPage;\n","import { useState, useEffect } from \"react\";\nimport IconButton from \"./IconButton\";\nimport { Link, useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { getAuthorizationHeader } from \"../helper\";\nimport DefaultImgs from \"../assets\";\nimport {\n  ChevronLeft,\n  Clock,\n  MapPin,\n  Map,\n  Phone,\n  ExternalLink,\n  Edit2,\n  Check,\n  X,\n} from \"react-feather\";\n\nfunction SpotPage(props) {\n  const defaultData = {};\n  // {\n  //   name: \"景點名稱\",\n  //   desc: \"景點敘述\",\n  //   picture: {},\n  //   class1: \"\",\n  //   openTime: \"open time\",\n  //   parking: {},\n  //   updateTime: {},\n  //   website: \"website url\",\n  //   address: \"address\",\n  //   phone: \"phone number\",\n  //   position: {},\n  // };\n  const [spotInfo, setSpotInfo] = useState(defaultData);\n  const { id } = useParams();\n  let navigate = useNavigate();\n  const API_URL = `https://ptx.transportdata.tw/MOTC/v2/Tourism/ScenicSpot?$filter=ID%20eq%20'${id}'&$top=3&$format=JSON`;\n\n  useEffect(() => {\n    requestData();\n  }, []);\n\n  async function requestData() {\n    const { data } = await axios.get(API_URL, {\n      headers: getAuthorizationHeader(),\n    });\n\n    setSpotInfo(data[0]);\n  }\n\n  const {\n    Name: name = \"景點名稱\",\n    DescriptionDetail: desc = \"description\",\n    Picture: picture = {},\n    Class1: class1 = \"\",\n    OpenTime: openTime = \"open time\",\n    ParkingPosition: parking = {},\n    UpdateTime: updateTime = \"update time\",\n    WebsiteUrl: website = \"\",\n    Address: address = \"address\",\n    Phone: phone = \"phone num\",\n    Position: position = {},\n  } = spotInfo;\n  const { PictureUrl1: picUrl, PictureDescription1: picDesc } = picture;\n\n  return (\n    <div className=\"spot-page\">\n      <header>\n        <IconButton\n          className=\"white back-button\"\n          clickHandler={() => navigate(-1)}\n        >\n          <ChevronLeft />\n        </IconButton>\n        <div className=\"title-content\">\n          <h1>{name}</h1>\n          {class1 ? <div className=\"label\">{class1}</div> : null}\n        </div>\n        <div className=\"spot-header-img\">\n          <img src={picUrl ? picUrl : DefaultImgs.spot} alt={picDesc} />\n        </div>\n      </header>\n      <div className=\"spot-content\">\n        <div className=\"spot-info\">\n          <div className=\"open-time\">\n            <Clock />\n            <span>{openTime ? openTime : \"沒有資料\"}</span>\n          </div>\n          {website ? (\n            <div className=\"website\">\n              <ExternalLink />\n              <Link to={website}>{website}</Link>\n            </div>\n          ) : null}\n          {address ? (\n            <address className=\"address\">\n              <MapPin />\n              <span>臺北市</span>\n            </address>\n          ) : null}\n          <div className=\"parking\">\n            {parking === {} ? (\n              <span>\n                <Check />\n                有停車位\n              </span>\n            ) : (\n              <span>\n                <X />\n                沒有停車位\n              </span>\n            )}\n          </div>\n        </div>\n        <div className=\"spot-desc\">\n          <h2>景點介紹</h2>\n          <p>{desc}</p>\n        </div>\n        <div className=\"spot-update-time\">\n          <Edit2 />\n          <span>{updateTime}</span>\n        </div>\n      </div>\n      <div className=\"spot-contact\">\n        {phone ? (\n          <a href={`tel:${phone}`} className=\"text-button call\">\n            <Phone />\n            打電話\n          </a>\n        ) : null}\n        <a\n          href={`http://maps.google.com/maps?z=12&t=m&q=loc:${position.PositionLat}+${position.PositionLon}\n`}\n          className=\"text-button map\"\n        >\n          <Map />\n          看地圖\n        </a>\n      </div>\n    </div>\n  );\n}\n\nexport default SpotPage;\n","import { BrowserRouter as Router, Route, Routes } from \"react-router-dom\";\n// import Search from \"./components/Search\";\nimport ExplorePage from \"./components/ExplorePage\";\nimport CityPage from \"./components/CityPage\";\nimport SpotPage from \"./components/SpotPage\";\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Router>\n        <Routes>\n          <Route path=\"/spot/:id\" element={<SpotPage />} />\n          <Route path=\"/city/:id\" element={<CityPage />} />\n          <Route path=\"/\" element={<ExplorePage />} />\n        </Routes>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}